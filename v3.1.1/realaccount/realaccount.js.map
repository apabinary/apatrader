{"version":3,"sources":["../../../../src/realaccount/realaccount.es6"],"names":["real_win","real_win_view","real_win_li","error_handler","err","console","error","growl","message","init","li","click","getLandingCompany","then","what_todo","init_real_win","catch","moveToTop","root","i18n","_title","createBlankWindow","title","resizable","collapsable","minimizable","maximizable","width","height","close","dialog","trigger","remove","open","destroy","unbind","init_state","offset","top","my","left","at","css","fixFooterPosition","app_id","state","route","value","empty_fields","validate","clear","debounce","show","input_disabled","risk","visible","user","disabled","accepted","salutation","salutation_array","first_name","last_name","date_of_birth","yearRange","showButtonPanel","residence","residence_name","address_line_1","address_line_2","city_address","state_address","state_address_array","text","address_postcode","phone","secret_question_inx","secret_question_array","secret_answer","place_of_birth","country_array","tax_residence","tax_identification_number","financial","experience_array","frequency_array","forex_trading_experience","forex_trading_frequency","indices_trading_experience","indices_trading_frequency","commodities_trading_experience","commodities_trading_frequency","stocks_trading_experience","stocks_trading_frequency","other_derivatives_trading_experience","other_derivatives_trading_frequency","other_instruments_trading_experience","other_instruments_trading_frequency","employment_industry_array","employment_industry","education_level_array","education_level","income_source_array","income_source","net_income_array","net_income","estimated_worth_array","estimated_worth","occupation_array","occupation","is_valid","isValid","test","new_account_real","update","request","undefined","address_city","address_state","secret_question","replace","send","data","info","oauth","local_storage","get","push","id","client_id","token","oauth_token","is_virtual","set","notice","switch_account","hide","all_selected","create_request","new_account_maltainvest","join","affiliate_token","accept_risk","warn","accept","decline","routes","bind","residence_promise","get_settings","unix","format","country_code","country","cached","residence_list","find","phone_idd","states_list"],"mappings":"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","file":"realaccount.js","sourcesContent":["/*\r\n * Created by amin on June 14, 2016.\r\n */\r\n\r\nimport $ from 'jquery';\r\nimport liveapi from 'websockets/binary_websockets';\r\nimport windows from 'windows/windows';\r\nimport rv from 'common/rivetsExtra';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport navigation from 'navigation/navigation';\r\nimport html from 'text!realaccount/realaccount.html';\r\nimport 'css!realaccount/realaccount.css';\r\n\r\nlet real_win = null;\r\nlet real_win_view = null; // rivets view\r\nlet real_win_li = null;\r\n\r\nconst error_handler = (err) => {\r\n   console.error(err);\r\n   $.growl.error({ message: err.message });\r\n};\r\n\r\nexport const init = (li) => {\r\n   real_win_li = li;\r\n   li.click(() => {\r\n      if (!real_win) {\r\n         navigation.getLandingCompany()\r\n            .then(\r\n               (what_todo) => init_real_win(html, what_todo)\r\n            )\r\n            .catch(error_handler);\r\n      }\r\n      else {\r\n         real_win.moveToTop();\r\n      }\r\n   });\r\n}\r\n\r\nconst init_real_win = (root, what_todo) => {\r\n   root = $(root).i18n();\r\n   const _title = {\r\n      'upgrade-mlt': 'Real Money Account Opening'.i18n(),\r\n      'upgrade-mf': 'Financial Account Opening form'.i18n()\r\n   }[what_todo];\r\n\r\n   real_win = windows.createBlankWindow(root, {\r\n      title: _title,\r\n      resizable: false,\r\n      collapsable: false,\r\n      minimizable: true,\r\n      maximizable: false,\r\n      width: 360,\r\n      height: 'auto',\r\n      'data-authorized': true,\r\n      close: () => {\r\n         real_win.dialog('destroy');\r\n         real_win.trigger('dialogclose'); // TODO: figure out why event is not fired.\r\n         real_win.remove();\r\n         real_win = null;\r\n      },\r\n      open: () => {},\r\n      destroy: () => {\r\n         real_win_view && real_win_view.unbind();\r\n         real_win_view = null;\r\n      }\r\n   });\r\n\r\n   init_state(root, what_todo);\r\n   real_win.dialog('open');\r\n\r\n   /* update dialog position, this way when dialog is resized it will not move*/\r\n   const offset = real_win.dialog('widget').offset();\r\n   offset.top = 110;\r\n   real_win.dialog(\"option\", \"position\", { my: offset.left, at: offset.top });\r\n   real_win.dialog('widget').css({\r\n      left: offset.left + 'px',\r\n      top: offset.top + 'px'\r\n   });\r\n   real_win.fixFooterPosition();\r\n}\r\n\r\nconst init_state = (root, what_todo) => {\r\n   const app_id = liveapi.app_id;\r\n   const state = {\r\n      route: { value: 'user' }, // routes: ['user', 'financial']\r\n      empty_fields: {\r\n         validate: false,\r\n         clear: _.debounce(() => {\r\n            state.empty_fields.validate = false;\r\n         }, 4000),\r\n         show: () => {\r\n            state.empty_fields.validate = true;\r\n            state.empty_fields.clear();\r\n         }\r\n      },\r\n      what_todo: what_todo,\r\n      input_disabled: what_todo === \"upgrade-mf\" ? true : false,\r\n      risk: {\r\n         visible: false,\r\n      },\r\n      user: {\r\n         disabled: false,\r\n         accepted: what_todo === 'upgrade-mf',\r\n         salutation: 'Mr',\r\n         salutation_array: ['Mr', 'Mrs', 'Ms', 'Miss'],\r\n         first_name: '',\r\n         last_name: '',\r\n         date_of_birth: '',\r\n         yearRange: \"-100:+0\",\r\n         showButtonPanel: false, // for jquery ui datepicker\r\n         residence: '-',\r\n         residence_name: '-',\r\n         address_line_1: '',\r\n         address_line_2: '',\r\n         city_address: '',\r\n         state_address: '-',\r\n         state_address_array: [{ text: '-', value: '-' }],\r\n         address_postcode: '',\r\n         phone: '',\r\n         secret_question_inx: 5,\r\n         secret_question_array: [\r\n            'Mother\\'s maiden name', 'Name of your pet', 'Name of first love',\r\n            'Memorable town/city', 'Memorable date', 'Favourite dish',\r\n            'Brand of first car', 'Favourite artist'\r\n         ],\r\n         secret_answer: '',\r\n         place_of_birth: '-',\r\n         country_array: [{ text: '-', value: '-' }],\r\n         tax_residence: '',\r\n         tax_identification_number: ''\r\n\r\n      },\r\n      financial: {\r\n         experience_array: ['0-1 year', '1-2 years', 'Over 3 years'],\r\n         frequency_array: ['0-5 transactions in the past 12 months', '6-10 transactions in the past 12 months', '40 transactions or more in the past 12 months'],\r\n\r\n         forex_trading_experience: '',\r\n         forex_trading_frequency: '',\r\n         indices_trading_experience: '',\r\n         indices_trading_frequency: '',\r\n         commodities_trading_experience: '',\r\n         commodities_trading_frequency: '',\r\n         stocks_trading_experience: '',\r\n         stocks_trading_frequency: '',\r\n         other_derivatives_trading_experience: '',\r\n         other_derivatives_trading_frequency: '',\r\n         other_instruments_trading_experience: '',\r\n         other_instruments_trading_frequency: '',\r\n\r\n         employment_industry_array: ['Construction', 'Education', 'Finance', 'Health', 'Tourism', 'Other'],\r\n         employment_industry: '',\r\n         education_level_array: ['Primary', 'Secondary', 'Tertiary'],\r\n         education_level: '',\r\n\r\n         income_source_array: ['Salaried Employee', 'Self-Employed', 'Investments & Dividends', 'Pension', 'Other'],\r\n         income_source: '',\r\n\r\n         net_income_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\r\n         net_income: '',\r\n\r\n         estimated_worth_array: ['Less than $100,000', '$100,000 - $250,000', '$250,001 - $500,000', '$500,001 - $1,000,000', 'Over $1,000,000'],\r\n         estimated_worth: '',\r\n\r\n         occupation_array: [\"Chief Executives, Senior Officials and Legislators\", \"Managers\", \"Professionals\", \"Clerks\",\r\n            \"Personal Care, Sales and Service Workers\", \"Agricultural, Forestry and Fishery Workers\",\r\n            \"Craft, Metal, Electrical and Electronics Workers\", \"Plant and Machine Operators and Assemblers\",\r\n            \"Mining, Construction, Manufacturing and Transport Workers\", \"Armed Forces\", \"Government Officers\",\r\n            \"Others\"\r\n         ],\r\n         occupation: '',\r\n\r\n         accepted: false,\r\n         disabled: false\r\n      }\r\n   };\r\n\r\n   state.user.is_valid = () => {\r\n      const user = state.user;\r\n      return user.first_name !== '' && user.last_name !== '' &&\r\n         moment(user.date_of_birth, 'YYYY-MM-DD', true).isValid() &&\r\n         user.residence !== '-' && user.address_line_1 !== '' &&\r\n         user.city_address !== '' && /^[^+]{0,20}$/.test(user.address_postcode) &&\r\n         user.phone !== '' && /^\\+?[0-9\\s]{6,35}$/.test(user.phone) &&\r\n         (state.what_todo != \"upgrade-mlt\" || /.{4,8}$/.test(user.secret_answer)) && // Check secret answer if mlt account\r\n         (state.what_todo != \"upgrade-mf\" || (state.user.place_of_birth &&\r\n            state.user.tax_residence && state.user.tax_identification_number && /^[\\w-]{0,20}$/.test(state.user.tax_identification_number)));\r\n   };\r\n\r\n   state.user.click = () => {\r\n      if (!state.user.is_valid()) {\r\n         state.empty_fields.show();\r\n         return;\r\n      }\r\n\r\n      if (state.what_todo === 'upgrade-mlt') {\r\n         state.user.new_account_real();\r\n         return;\r\n      }\r\n\r\n      state.route.update('financial');\r\n   }\r\n   state.user.new_account_real = () => {\r\n\r\n      const user = state.user;\r\n      const request = {\r\n         new_account_real: 1,\r\n         salutation: user.salutation,\r\n         first_name: user.first_name,\r\n         last_name: user.last_name,\r\n         date_of_birth: user.date_of_birth,\r\n         residence: user.residence,\r\n         address_line_1: user.address_line_1,\r\n         address_line_2: user.address_line_2 || undefined, // optional field\r\n         address_city: user.city_address,\r\n         address_state: user.state_address || undefined,\r\n         address_postcode: user.address_postcode || undefined,\r\n         phone: user.phone,\r\n         secret_question: user.secret_question_array[user.secret_question_inx],\r\n         secret_answer: user.secret_answer.replace('\"\"', \"'\")\r\n      };\r\n\r\n      state.user.disabled = true;\r\n      liveapi.send(request)\r\n         .then((data) => {\r\n            state.user.disabled = false;\r\n            const info = data.new_account_real;\r\n            const oauth = local_storage.get('oauth');\r\n            oauth.push({ id: info.client_id, token: info.oauth_token, is_virtual: 0 });\r\n            local_storage.set('oauth', oauth);\r\n            $.growl.notice({ message: 'Account successfully created' });\r\n            $.growl.notice({ message: 'Switching to your new account ...' });\r\n            /* login with the new account */\r\n            return liveapi.switch_account(info.client_id)\r\n               .then(() => {\r\n                  real_win && real_win.dialog('close');\r\n                  real_win_li.hide();\r\n               });\r\n         })\r\n         .catch((err) => {\r\n            state.user.disabled = false;\r\n            error_handler(err);\r\n         });\r\n   };\r\n\r\n   state.financial.all_selected = () => {\r\n      const financial = state.financial;\r\n      return financial.forex_trading_experience !== '' &&\r\n         financial.forex_trading_frequency !== '' &&\r\n         financial.indices_trading_experience !== '' &&\r\n         financial.indices_trading_frequency !== '' &&\r\n         financial.commodities_trading_experience !== '' &&\r\n         financial.commodities_trading_frequency !== '' &&\r\n         financial.stocks_trading_experience !== '' &&\r\n         financial.stocks_trading_frequency !== '' &&\r\n         financial.other_derivatives_trading_experience !== '' &&\r\n         financial.other_derivatives_trading_frequency !== '' &&\r\n         financial.other_instruments_trading_experience !== '' &&\r\n         financial.other_instruments_trading_frequency !== '' &&\r\n         financial.employment_industry !== '' &&\r\n         financial.occupation !== '' &&\r\n         financial.education_level !== '' &&\r\n         financial.income_source !== '' &&\r\n         financial.net_income !== '' &&\r\n         financial.estimated_worth !== '';\r\n   };\r\n\r\n   state.financial.click = () => {\r\n      if (!state.financial.all_selected()) {\r\n         state.empty_fields.show();\r\n         $.growl.error({ message: 'Not all financial information are completed' });\r\n         return;\r\n      }\r\n      if (!state.financial.accepted) {\r\n         $.growl.error({ message: 'Binary.com terms and conditions unchecked.' });\r\n         return;\r\n      }\r\n\r\n      state.risk.visible = true;\r\n   };\r\n   state.financial.create_request = () => {\r\n      const user = state.user;\r\n      const financial = state.financial;\r\n      const request = {\r\n         new_account_maltainvest: 1,\r\n         salutation: user.salutation,\r\n         first_name: user.first_name,\r\n         last_name: user.last_name,\r\n         date_of_birth: user.date_of_birth,\r\n         residence: user.residence,\r\n         address_line_1: user.address_line_1,\r\n         address_line_2: user.address_line_2 || undefined, // optional field\r\n         address_city: user.city_address,\r\n         address_state: user.state_address || undefined,\r\n         address_postcode: user.address_postcode || undefined,\r\n         phone: user.phone,\r\n         place_of_birth: state.user.place_of_birth,\r\n         tax_residence: state.user.tax_residence.join(\",\"),\r\n         tax_identification_number: state.user.tax_identification_number,\r\n\r\n         affiliate_token: '',\r\n         forex_trading_experience: financial.forex_trading_experience,\r\n         forex_trading_frequency: financial.forex_trading_frequency,\r\n         indices_trading_experience: financial.indices_trading_experience,\r\n         indices_trading_frequency: financial.indices_trading_frequency,\r\n         commodities_trading_experience: financial.commodities_trading_experience,\r\n         commodities_trading_frequency: financial.commodities_trading_frequency,\r\n         stocks_trading_experience: financial.stocks_trading_experience,\r\n         stocks_trading_frequency: financial.stocks_trading_frequency,\r\n         other_derivatives_trading_experience: financial.other_derivatives_trading_experience,\r\n         other_derivatives_trading_frequency: financial.other_derivatives_trading_frequency,\r\n         other_instruments_trading_experience: financial.other_instruments_trading_experience,\r\n         other_instruments_trading_frequency: financial.other_instruments_trading_frequency,\r\n         employment_industry: financial.employment_industry,\r\n         occupation: financial.occupation,\r\n         education_level: financial.education_level,\r\n         income_source: financial.income_source,\r\n         net_income: financial.net_income,\r\n         estimated_worth: financial.estimated_worth,\r\n         accept_risk: 1,\r\n      };\r\n      return request;\r\n   };\r\n   state.financial.new_account_maltainvest = () => {\r\n      const request = state.financial.create_request();\r\n      console.warn(request);\r\n   }\r\n\r\n   state.risk.accept = () => {\r\n      const request = state.financial.create_request();\r\n      state.risk.visible = false;\r\n      state.financial.disabled = true;\r\n      liveapi.send(request)\r\n         .then((data) => {\r\n            const info = data.new_account_maltainvest;\r\n            const oauth = local_storage.get('oauth');\r\n            oauth.push({ id: info.client_id, token: info.oauth_token, is_virtual: 0 });\r\n            local_storage.set('oauth', oauth);\r\n            $.growl.notice({ message: 'Account successfully created' });\r\n            $.growl.notice({ message: 'Switching to your new account ...' });\r\n            /* login with the new account */\r\n            return liveapi.switch_account(info.client_id)\r\n               .then(() => {\r\n                  real_win && real_win.dialog('close');\r\n                  real_win_li.hide();\r\n               });\r\n         })\r\n         .catch((err) => {\r\n            state.financial.disabled = false;\r\n            error_handler(err);\r\n         });\r\n   }\r\n   state.risk.decline = () => {\r\n      state.risk.visible = false;\r\n   }\r\n\r\n   state.route.update = (route) => {\r\n      const routes = {\r\n         'user': 1010,\r\n         'financial': 1540\r\n      };\r\n      state.route.value = route;\r\n      real_win.dialog('option', 'height', routes[route]);\r\n      real_win.dialog('widget').trigger('dialogresizestop');\r\n   };\r\n\r\n   real_win_view = rv.bind(root[0], state);\r\n\r\n   /* get the residence field and its states */\r\n   const residence_promise = liveapi.send({ get_settings: 1 })\r\n      .then((data) => {\r\n         data = data.get_settings;\r\n         state.user.salutation = data.salutation || state.user.salutation;\r\n         state.user.first_name = data.first_name;\r\n         state.user.last_name = data.last_name;\r\n         state.user.date_of_birth = moment.unix(data.date_of_birth).format(\"YYYY-MM-DD\");\r\n         state.user.address_line_1 = data.address_line_1;\r\n         state.user.address_line_2 = data.address_line_2;\r\n         state.user.city_address = data.address_city;\r\n         state.user.state_address = data.address_state;\r\n         state.user.address_postcode = data.address_postcode;\r\n         state.user.phone = data.phone;\r\n         state.user.residence = data.country_code;\r\n         state.user.residence_name = data.country;\r\n      })\r\n      .catch(error_handler);\r\n\r\n   residence_promise\r\n      .then(\r\n         () => liveapi.cached.send({ residence_list: 1 })\r\n      )\r\n      .then((data) => {\r\n         state.user.country_array = data.residence_list;\r\n         state.user.place_of_birth = data.residence_list[0].value;\r\n         const residence = _.find(data.residence_list, { value: state.user.residence });\r\n         state.user.phone = state.user.phone ? state.user.phone : '+' + residence.phone_idd;\r\n      })\r\n      .catch(error_handler);\r\n\r\n   residence_promise\r\n      .then(\r\n         () => liveapi.cached.send({ states_list: state.user.residence })\r\n      )\r\n      .then((data) => {\r\n         state.user.state_address_array = data.states_list;\r\n         state.user.state_address = data.states_list[0].value;\r\n      })\r\n      .catch(error_handler);\r\n}\r\n\r\nexport default  { init }\r\n"]}