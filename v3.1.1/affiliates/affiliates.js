define(["exports","jquery","../websockets/binary_websockets","../navigation/menu","lodash","../charts/chartOptions","../charts/tableView","text!../charts/chartWindow.html","../charts/charts","../instruments/instruments","../charts/chartWindow","../common/util","jquery-growl"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(a,"__esModule",{value:!0}),a.init=void 0;var m=l(b),n=(l(c),l(d),l(e)),o=l(f),p=l(g),q=l(h),r=l(i),s=l(j),t=l(k),u=function(a,b,c,d,e,f,g){var h=a.attr("id"),i=p["default"].init(a,x);o["default"].init(h,b,c,i.show,d,e,!f,!g)},v=new RegExp(/^(GMT[\+|-])\d{1,2}(\.\d{1,2})*$/),w=getParameterByName("timezone").toUpperCase().replace(" ","+"),x=0;if(v.test(w)){var y=w.split("GMT")[1],z=parseInt(y.split(".")[0]),A=y.split(".")[1]?z>0?parseInt(y.split(".")[1]):-1*parseInt(y.split(".")[1]):0;x=-1*(60*z+A)}Highcharts.setOptions({global:{timezoneOffset:x},plotOptions:{candlestick:{lineColor:"rgba(0,0,0,1)",color:"rgba(215,24,24,1)",upColor:"rgba(2,146,14,1)",upLineColor:"rgba(0,0,0,1)"}}});var B=a.init=function(){m["default"]("body").addClass("affiliates");var a=getParameterByName("chartContainerID")||"webtrader-dialog-1",b=getParameterByName("timePeriod")||"1d",c="1t"==b?"line":"candlestick",d=m["default"](q["default"]).i18n();d.attr("id",a).find("div.chartSubContainerHeader").attr("id",a+"_header").end().find("div.chartSubContainer").attr("id",a+"_chart").end(),s["default"].init().then(function(e){if(!m["default"].isEmptyObject(e)){var f=getParameterByName("instrument"),g=getObjects(e,"symbol",f);if(g&&g.length>0&&g[0].symbol&&g[0].display_name)if(validateParameters()){var h=g[0].symbol,i=g[0].display_name,j=g[0].delay_amount||0,k=isHideOverlay(),l=isHideShare(),o={instrumentCode:h,instrumentName:i,timePeriod:b,type:c,delayAmount:j,name:a};t["default"].add_chart_options(a,o),r["default"].drawChart("#"+a+"_chart",{instrumentCode:h,instrumentName:i,timePeriod:b,type:c,delayAmount:j}),u(d,b,c,i,h,l,k),n["default"].defer(function(){r["default"].triggerReflow("#"+a+"_chart"),m["default"]("#"+a).on("chart-time-period-changed",function(a,b){window.timePeriodChangeListener&&window.timePeriodChangeListener(b)})})}else m["default"].growl.error({message:"Invalid parameter(s)!".i18n()}),d.find("div.chartSubContainerHeader").hide();else m["default"].growl.error({message:"Instrument Code Unknown/Unavailable!".i18n()}),d.find("div.chartSubContainerHeader").hide()}})["catch"](function(a){m["default"].growl.error({message:"Error getting market information!".i18n()}),d.find("div.chartSubContainerHeader").hide()}),m["default"](".mainContainer").append(d),m["default"]("#"+a+" .chartSubContainer").height(m["default"](window).height()-50).width(m["default"](window).width()),m["default"]("#"+a+" .table-view").width(m["default"](window).width()),m["default"](window).resize(function(){m["default"]("#"+a+" .chartSubContainer").height(m["default"](window).height()-50).width(m["default"](window).width()),m["default"]("#"+a+" .table-view").width(m["default"](window).width())})};a["default"]={init:B}});